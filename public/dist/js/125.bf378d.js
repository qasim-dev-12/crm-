/*! For license information please see 125.bf378d.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{485:function(t,r,e){"use strict";e.r(r);var n=e(3),o=e.n(n),a=e(4),i=e(19),s=e.n(i);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(){var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function a(e,n,o,a){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return v(u,"_invoke",function(e,n,o){var a,s,c,u=0,v=o||[],l=!1,_={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(r,e){return a=r,s=0,c=t,_.n=e,i}};function p(e,n){for(s=e,c=n,r=0;!l&&u&&!o&&r<v.length;r++){var o,a=v[r],p=_.p,d=a[2];e>3?(o=d===n)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=e<2&&p<a[1])?(s=0,_.v=n,_.n=a[1]):p<d&&(o=e<3||a[0]>n||n>d)&&(a[4]=e,a[5]=n,_.n=d,s=0))}if(o||e>1)return i;throw l=!0,n}return function(o,v,d){if(u>1)throw TypeError("Generator is already running");for(l&&1===v&&p(v,d),s=v,c=d;(r=s<2?t:c)||!l;){a||(s?s<3?(s>1&&(_.n=-1),p(s,c)):_.n=c:_.v=c);try{if(u=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((r=(l=_.n<0)?c:e.call(n,_))!==i)break}catch(r){a=t,s=1,c=r}finally{u=1}}return{value:r,done:l}}}(e,o,a),!0),u}var i={};function s(){}function c(){}function l(){}r=Object.getPrototypeOf;var _=[][n]?r(r([][n]())):(v(r={},n,(function(){return this})),r),p=l.prototype=s.prototype=Object.create(_);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,v(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return c.prototype=l,v(p,"constructor",l),v(l,"constructor",c),c.displayName="GeneratorFunction",v(l,o,"GeneratorFunction"),v(p),v(p,o,"Generator"),v(p,n,(function(){return this})),v(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:a,m:d}})()}function v(t,r,e,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(v=function(t,r,e,n){function a(r,e){v(t,r,(function(t){return this._invoke(r,e,t)}))}r?o?o(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:(a("next",0),a("throw",1),a("return",2))})(t,r,e,n)}function l(t,r,e,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void e(t)}s.done?r(c):Promise.resolve(c).then(n,o)}function _(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function p(t,r,e){return(r=function(t){var r=function(t,r){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==c(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var d={middleware:["auth","check-permissions"],metaInfo:function(){return{title:this.$t("Inventory History")}},data:function(){return{breadcrumbsCurrent:"Inventory History",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Inventory",url:"inventory.index"},{name:"History",url:""}],allData:"",product:"",date:new Date,loading:!1,productPrefix:""}},computed:function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?_(Object(e),!0).forEach((function(r){p(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({},Object(a.b)("operations",["appInfo"])),created:function(){this.getHistory(),this.productPrefix=this.appInfo.productPrefix},methods:{printWindow:function(){window.print()},getHistory:function(){var t,r=this;return(t=u().m((function t(){var e,n;return u().w((function(t){for(;;)switch(t.n){case 0:return r.loading=!0,t.n=1,o.a.get(window.location.origin+"/api/inventory-history/"+r.$route.params.slug);case 1:e=t.v,n=e.data,r.allData=n,r.product=n.product,r.loading=!1;case 2:return t.a(2)}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var a=t.apply(r,e);function i(t){l(a,n,o,i,s,"next",t)}function s(t){l(a,n,o,i,s,"throw",t)}i(void 0)}))})()},stockInQty:function(t){return t.reduce((function(t,r){return Number(t)+Number(r.quantity)}),0)},stockOutQty:function(t){return t.reduce((function(t,r){return Number(t)+Number(r.quantity)}),0)},generatePDF:function(){var t=document.getElementById("content-to-pdf"),r={margin:5,filename:"Inventory History-"+this.$route.params.slug+".pdf",image:{type:"jpeg",quality:.98},pagebreak:{mode:"avoid-all",before:"#page-break"},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}};s()().from(t).set(r).save()}}},f=e(1),b=Object(f.a)(d,(function(){var t=this,r=t._self._c;return r("div",[r("breadcrumbs",{attrs:{items:t.breadcrumbs,current:t.breadcrumbsCurrent}}),t._v(" "),r("div",{staticClass:"row no-print mb-2"},[r("div",{staticClass:"w-100 text-right float-right"},[t.allData?r("div",{staticClass:"btn-group"},[r("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(r){return t.generatePDF()}}},[r("i",{staticClass:"fas fa-download"}),t._v(" "+t._s(t.$t("download"))+"\n        ")]),t._v(" "),r("a",{staticClass:"btn btn-secondary",attrs:{href:"#"},on:{click:function(r){return t.printWindow()}}},[r("i",{staticClass:"fas fa-print"}),t._v(" "+t._s(t.$t("Print"))+"\n        ")]),t._v(" "),r("router-link",{staticClass:"btn btn-dark float-right",attrs:{to:{name:"inventory.index"}}},[r("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v(" "+t._s(t.$t("Back"))+"\n        ")])],1):t._e()])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"invoice p-3 mb-3 w-100",attrs:{id:"content-to-pdf"}},[r("div",{staticClass:"row invoice-info"},[r("div",{staticClass:"col-sm-4 invoice-col"},[r("CompanyInfo")],1),t._v(" "),t.product&&t.product.category&&t.product.subCategory&&t.product.itemUnit?r("div",{staticClass:"col-sm-6 offset-sm-2 invoice-col float-right text-md-right"},[r("p",[t._v("\n            "+t._s(t.$t("Date"))+": "+t._s(t._f("moment")(t.date,"Do MMM, YYYY"))+"\n          ")]),t._v(" "),r("h5",[t._v(t._s(t.$t("Product Details")))]),t._v(" "),r("strong",[t._v(t._s(t.$t("Code"))+":")]),t._v("\n          "+t._s(t._f("withPrefix")(t.product.code,t.productPrefix))),r("br"),t._v(" "),r("strong",[t._v(t._s(t.$t("Name"))+":")]),t._v(" "+t._s(t.product.name)),r("br"),t._v(" "),r("strong",[t._v(t._s(t.$t("Category"))+":")]),t._v("\n          "+t._s(t.product.category.name)),r("br"),t._v(" "),r("strong",[t._v(t._s(t.$t("Sub Category"))+":")]),t._v("\n          "+t._s(t.product.subCategory.name)),r("br"),t._v(" "),r("strong",[t._v(t._s(t.$t("Stock"))+":")]),t._v("\n          "+t._s(t.product.availableQty)+" "+t._s(t.product.itemUnit.code)+" "),r("br")]):t._e()]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"row mt-5 position-relative"},[r("table-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),r("div",{staticClass:"col-lg-6"},[r("h4",{attrs:{align:"center"}},[r("i",[t._v(t._s(t.$t("Stock In")))])]),t._v(" "),r("div",{staticClass:"table-responsive table-custom"},[r("table",{staticClass:"table table-sm"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("SL")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Stock In")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Price")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Type")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Code")))]),t._v(" "),r("th",[t._v("\n                    "+t._s(t.$t("Supplier"))+"/"+t._s(t.$t("Client"))+"\n                  ")])])]),t._v(" "),r("tbody",[t._l(t.allData.stockIns,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(n+1))]),t._v(" "),r("td",[t._v(t._s(t._f("moment")(e.date,"Do MMM, YYYY")))]),t._v(" "),r("td",[t._v(t._s(e.quantity))]),t._v(" "),r("td",[t._v(t._s(t._f("withCurrency")(e.price)))]),t._v(" "),r("td",[r("span",{staticClass:"badge bg-success"},[t._v(t._s(e.type))])]),t._v(" "),r("td",[t._v(t._s(e.code))]),t._v(" "),r("td",["Purchase"===e.type?r("span",[t._v(t._s(e.supplier))]):"Invoice Return"===e.type?r("span",[t._v(t._s(e.client))]):t._e()])])})),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2",align:"right"}},[r("strong",[t._v(t._s(t.$t("Total Quantity")))])]),t._v(" "),t.allData.stockIns?r("td",{attrs:{colspan:"5"}},[r("strong",[t._v(t._s(t.stockInQty(t.allData.stockIns)))])]):t._e()])],2)])])]),t._v(" "),r("div",{staticClass:"col-lg-6"},[r("h4",{attrs:{align:"center"}},[r("i",[t._v(t._s(t.$t("Stock Out")))])]),t._v(" "),r("div",{staticClass:"table-responsive table-custom"},[r("table",{staticClass:"table table-sm"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("SL")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Stock Out")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Price")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Type")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Code")))]),t._v(" "),r("th",[t._v("\n                    "+t._s(t.$t("Client"))+"/"+t._s(t.$t("Supplier"))+"\n                  ")])])]),t._v(" "),r("tbody",[t._l(t.allData.stockOuts,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(n+1))]),t._v(" "),r("td",[t._v(t._s(t._f("moment")(e.date,"Do MMM, YYYY")))]),t._v(" "),r("td",[t._v("-"+t._s(e.quantity))]),t._v(" "),r("td",[t._v(t._s(t._f("withCurrency")(e.price)))]),t._v(" "),r("td",[r("span",{staticClass:"badge bg-success"},[t._v(t._s(e.type))])]),t._v(" "),r("td",[t._v(t._s(e.code))]),t._v(" "),r("td",["Invoice"===e.type?r("span",[t._v(t._s(e.client))]):"Purchase Return"===e.type?r("span",[t._v(t._s(e.supplier))]):t._e()])])})),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2",align:"right"}},[r("b",[r("i",[t._v(t._s(t.$t("Total Quantity"))+": ")])])]),t._v(" "),t.allData.stockOuts?r("td",{attrs:{colspan:"5"}},[r("b",[r("i",[t._v("- "+t._s(t.stockOutQty(t.allData.stockOuts))+" ")])])]):t._e()])],2)])])])],1)])])],1)}),[],!1,null,null,null);r.default=b.exports}}]);