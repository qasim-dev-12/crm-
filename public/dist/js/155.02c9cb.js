/*! For license information please see 155.02c9cb.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{533:function(t,r,e){"use strict";e.r(r);var n=e(5),a=e(19),o=e.n(a);function s(){var t,r,e="function"==typeof Symbol?Symbol:{},n=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function o(e,n,a,o){var s=n&&n.prototype instanceof c?n:c,u=Object.create(s.prototype);return i(u,"_invoke",function(e,n,a){var o,s,i,c=0,u=a||[],_=!1,v={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(r,e){return o=r,s=0,i=t,v.n=e,l}};function f(e,n){for(s=e,i=n,r=0;!_&&c&&!a&&r<u.length;r++){var a,o=u[r],f=v.p,p=o[2];e>3?(a=p===n)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=f&&((a=e<2&&f<o[1])?(s=0,v.v=n,v.n=o[1]):f<p&&(a=e<3||o[0]>n||n>p)&&(o[4]=e,o[5]=n,v.n=p,s=0))}if(a||e>1)return l;throw _=!0,n}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(_&&1===u&&f(u,p),s=u,i=p;(r=s<2?t:i)||!_;){o||(s?s<3?(s>1&&(v.n=-1),f(s,i)):v.n=i:v.v=i);try{if(c=2,o){if(s||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=o.return)&&r.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((r=(_=v.n<0)?i:e.call(n,v))!==l)break}catch(r){o=t,s=1,i=r}finally{c=1}}return{value:r,done:_}}}(e,a,o),!0),u}var l={};function c(){}function u(){}function _(){}r=Object.getPrototypeOf;var v=[][n]?r(r([][n]())):(i(r={},n,(function(){return this})),r),f=_.prototype=c.prototype=Object.create(v);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,i(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=_,i(f,"constructor",_),i(_,"constructor",u),u.displayName="GeneratorFunction",i(_,a,"GeneratorFunction"),i(f),i(f,a,"Generator"),i(f,n,(function(){return this})),i(f,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:o,m:p}})()}function i(t,r,e,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}(i=function(t,r,e,n){function o(r,e){i(t,r,(function(t){return this._invoke(r,e,t)}))}r?a?a(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:(o("next",0),o("throw",1),o("return",2))})(t,r,e,n)}function l(t,r,e,n,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void e(t)}i.done?r(l):Promise.resolve(l).then(n,a)}var c={middleware:["auth","check-permissions"],metaInfo:function(){return{title:this.$t("Summary Report")}},data:function(){return{breadcrumbsCurrent:"Summary Report",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Reports",url:""},{name:"Summary Report",url:""}],form:new n.a({month:(new Date).getMonth()+1,year:(new Date).getFullYear(),currentYear:(new Date).getFullYear()}),reportInfo:"",totalOpeningBalance:0,totalClosingBalance:0,totalCollection:0,totalExpense:0,totalTransfer:0,loading:!1}},computed:{years:function(){return Array.from({length:this.form.currentYear-2020},(function(t,r){return 2021+r}))}},methods:{getReportData:function(){var t,r=this;return(t=s().m((function t(){return s().w((function(t){for(;;)switch(t.n){case 0:return r.loading=!0,t.n=1,r.form.post(window.location.origin+"/api/reports/summery").then((function(t){r.reportInfo=t.data,r.calculateSum(r.reportInfo),r.loading=!1})).catch((function(){toast.fire({type:"error",title:r.$t("There was something wrong")})}));case 1:r.form.currentYear=(new Date).getFullYear();case 2:return t.a(2)}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,a){var o=t.apply(r,e);function s(t){l(o,n,a,s,i,"next",t)}function i(t){l(o,n,a,s,i,"throw",t)}s(void 0)}))})()},calculateSum:function(t){var r=[0,0,0,0,0];this.totalOpeningBalance=r[0],this.totalClosingBalance=r[1],this.totalCollection=r[2],this.totalExpense=r[3],this.totalTransfer=r[4],this.totalOpeningBalance=t.openingBalances.reduce((function(t,r){return Number(t)+Number(r.current_balance)}),0),this.totalClosingBalance=t.closingBalances.reduce((function(t,r){return Number(t)+Number(r.current_balance)}),0),this.totalCollection=t.accountCollections.reduce((function(t,r){return Number(t)+Number(r.total_collection)}),0),this.totalExpense=t.expenses+t.payrolls+t.loanInterest+t.assetDepriciation,this.totalTransfer=t.balanceTransfers.reduce((function(t,r){return Number(t)+Number(r.amount)}),0)},printWindow:function(){window.print()},generatePDF:function(){var t=document.getElementById("content-to-pdf");o()().from(t).set({margin:5,filename:"Summary Report.pdf",image:{type:"jpeg",quality:.98},pagebreak:{mode:"avoid-all",before:"#page-break"},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}}).save()}}},u=e(1),_=Object(u.a)(c,(function(){var t=this,r=t._self._c;return r("div",[r("breadcrumbs",{attrs:{items:t.breadcrumbs,current:t.breadcrumbsCurrent}}),t._v(" "),r("div",{staticClass:"row no-print"},[r("div",{staticClass:"col-lg-12"},[r("div",{staticClass:"card"},[r("form",{attrs:{role:"form"},on:{submit:function(r){return r.preventDefault(),t.getReportData.apply(null,arguments)},keydown:function(r){return t.form.onKeydown(r)}}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"month"}},[t._v(" "+t._s(t.$t("Month"))+" ")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.month,expression:"form.month"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("month")},attrs:{id:"month"},on:{change:function(r){var e=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"month",r.target.multiple?e:e[0])}}},[r("option",{attrs:{value:"1"}},[t._v("January")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("February")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("March")]),t._v(" "),r("option",{attrs:{value:"4"}},[t._v("April")]),t._v(" "),r("option",{attrs:{value:"5"}},[t._v("May")]),t._v(" "),r("option",{attrs:{value:"6"}},[t._v("June")]),t._v(" "),r("option",{attrs:{value:"7"}},[t._v("July")]),t._v(" "),r("option",{attrs:{value:"8"}},[t._v("August")]),t._v(" "),r("option",{attrs:{value:"9"}},[t._v("September")]),t._v(" "),r("option",{attrs:{value:"10"}},[t._v("October")]),t._v(" "),r("option",{attrs:{value:"11"}},[t._v("November")]),t._v(" "),r("option",{attrs:{value:"12"}},[t._v("December")])]),t._v(" "),r("has-error",{attrs:{form:t.form,field:"month"}})],1),t._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"year"}},[t._v(t._s(t.$t("Year")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.year,expression:"form.year"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("year")},attrs:{id:"year"},on:{change:function(r){var e=Array.prototype.filter.call(r.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"year",r.target.multiple?e:e[0])}}},t._l(t.years,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v("\n                    "+t._s(e)+"\n                  ")])})),0),t._v(" "),r("has-error",{attrs:{form:t.form,field:"year"}})],1)])]),t._v(" "),r("div",{staticClass:"card-footer"},[r("v-button",{staticClass:"btn btn-primary",attrs:{loading:t.form.busy}},[r("i",{staticClass:"fas fa-eye"}),t._v(" "+t._s(t.$t("View Report"))+"\n            ")]),t._v(" "),r("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"reset"},on:{click:function(r){return t.form.reset()}}},[r("i",{staticClass:"fas fa-power-off"}),t._v(" "+t._s(t.$t("Reset"))+"\n            ")])],1)])])])]),t._v(" "),r("div",{staticClass:"row no-print mb-2"},[r("div",{staticClass:"w-100 text-right float-right"},[t.reportInfo?r("div",{staticClass:"btn-group"},[r("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(r){return t.generatePDF()}}},[r("i",{staticClass:"fas fa-download"}),t._v(" "+t._s(t.$t("Download"))+"\n        ")]),t._v(" "),r("a",{staticClass:"btn btn-secondary",attrs:{href:"#"},on:{click:function(r){return t.printWindow()}}},[r("i",{staticClass:"fas fa-print"}),t._v(" "+t._s(t.$t("Print"))+"\n        ")]),t._v(" "),r("router-link",{staticClass:"btn btn-dark float-right",attrs:{to:{name:"home"}}},[r("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v(" "+t._s(t.$t("Back"))+"\n        ")])],1):t._e()])]),t._v(" "),t.reportInfo?r("div",{staticClass:"row"},[r("div",{staticClass:"invoice p-3 mb-3 w-100",attrs:{id:"content-to-pdf"}},[r("div",{staticClass:"row invoice-info"},[r("div",{staticClass:"m-auto invoice-col"},[r("CompanyInfo",{staticClass:"text-center"})],1)]),t._v(" "),r("div",{staticClass:"row mt-3 position-relative"},[r("table-loading",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),r("div",{staticClass:"table-responsive col-xl-10 m-auto"},[r("table",{staticClass:"table table-bordered table-striped table-sm"},[r("thead",[r("tr",{staticClass:"success text-center"},[r("th",{attrs:{colspan:"3"}},[r("h5",[t._v("\n                    "+t._s(t.$t("Monthly Summary"))+":\n                    "+t._s(t.reportInfo.monthName)+", "+t._s(t.reportInfo.year)),r("br")])])])]),t._v(" "),r("thead",[r("tr",[r("th",[t._v(t._s(t.$t("SL")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Particulars")))]),t._v(" "),r("th",[t._v(t._s(t.$t("Balance")))])])]),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Opening Balance")))])])]),t._v(" "),r("tbody",[t._l(t.reportInfo.openingBalances,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(++n))]),t._v(" "),r("td",[t._v(t._s(e.bank_name)+" ["+t._s(e.account_number)+"]")]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(e.current_balance)))])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"2"}},[r("strong",[t._v(t._s(t.$t("Total")))])]),t._v(" "),r("td",[r("strong",[t._v("\n                    "+t._s(t._f("withAbsoluteCurrency")(t.totalOpeningBalance))+"\n                  ")])])])],2),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Sales")))])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("1")]),t._v(" "),r("td",[t._v(t._s(t.$t("Invoice Sales")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.invoiceSales)))])]),t._v(" "),r("tr",[r("td",[t._v("2")]),t._v(" "),r("td",[t._v(t._s(t.$t("Invoice Dues")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.invoiceDue)))])])]),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Accounts Collection")))])])]),t._v(" "),r("tbody",[t._l(t.reportInfo.accountCollections,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(++n))]),t._v(" "),r("td",[t._v(t._s(e.bank_name)+" ["+t._s(e.account_number)+"]")]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(e.total_collection)))])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"2"}},[r("strong",[t._v(t._s(t.$t("Total")))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t._f("withAbsoluteCurrency")(t.totalCollection)))])])])],2),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Expenses")))])])]),t._v(" "),r("tbody",[r("tr",[r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Purchase")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.totalPurchase)))])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("General")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.expenses)))])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Payroll")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.payrolls)))])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Loan Interest")))]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(t.reportInfo.loanInterest)))])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Asset Depreciation")))]),t._v(" "),r("td",[t._v("\n                  "+t._s(t._f("withAbsoluteCurrency")(t.reportInfo.assetDepriciation))+"\n                ")])]),t._v(" "),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"2"}},[r("strong",[t._v(t._s(t.$t("Total")))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t._f("withAbsoluteCurrency")(t.totalExpense)))])])])]),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Transfer")))])])]),t._v(" "),r("tbody",[t._l(t.reportInfo.balanceTransfers,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(++n))]),t._v(" "),r("td",[t._v("\n                  "+t._s(t.$t("Balance Transfer From"))+" ["+t._s(e.debit_transaction.cashbook_account.account_number)+"] "+t._s(t.$t("To"))+" ["+t._s(e.credit_transaction.cashbook_account.account_number)+"]\n                ")]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(e.amount)))])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"2"}},[r("strong",[t._v(t._s(t.$t("Total")))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t._f("withAbsoluteCurrency")(t.totalTransfer)))])])])],2),t._v(" "),r("thead",[r("tr",[r("th",{attrs:{colspan:"3"}},[t._v(t._s(t.$t("Closing Balance")))])])]),t._v(" "),r("tbody",[t._l(t.reportInfo.closingBalances,(function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(++n))]),t._v(" "),r("td",[t._v(t._s(e.bank_name)+" ["+t._s(e.account_number)+"]")]),t._v(" "),r("td",[t._v(t._s(t._f("withAbsoluteCurrency")(e.current_balance)))])])})),t._v(" "),r("tr",[r("td",{staticClass:"text-right",attrs:{colspan:"2"}},[r("strong",[t._v(t._s(t.$t("Total")))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t._f("withAbsoluteCurrency")(t.totalClosingBalance)))])])])],2)])])],1)])]):t._e()],1)}),[],!1,null,null,null);r.default=_.exports}}]);