/*! For license information please see 45.f48699.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{160:function(t,e,a){"use strict";a.r(e);var o=a(5),n=a(4),r=(a(9),a(3)),s=a.n(r);function c(){var t,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function r(a,o,n,r){var c=o&&o.prototype instanceof u?o:u,d=Object.create(c.prototype);return i(d,"_invoke",function(a,o,n){var r,c,i,u=0,d=n||[],l=!1,f={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,a){return r=e,c=0,i=t,f.n=a,s}};function p(a,o){for(c=a,i=o,e=0;!l&&u&&!n&&e<d.length;e++){var n,r=d[e],p=f.p,m=r[2];a>3?(n=m===o)&&(i=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=t):r[0]<=p&&((n=a<2&&p<r[1])?(c=0,f.v=o,f.n=r[1]):p<m&&(n=a<3||r[0]>o||o>m)&&(r[4]=a,r[5]=o,f.n=m,c=0))}if(n||a>1)return s;throw l=!0,o}return function(n,d,m){if(u>1)throw TypeError("Generator is already running");for(l&&1===d&&p(d,m),c=d,i=m;(e=c<2?t:i)||!l;){r||(c?c<3?(c>1&&(f.n=-1),p(c,i)):f.n=i:f.v=i);try{if(u=2,r){if(c||(n="next"),e=r[n]){if(!(e=e.call(r,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,c<2&&(c=0)}else 1===c&&(e=r.return)&&e.call(r),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);r=t}else if((e=(l=f.n<0)?i:a.call(o,f))!==s)break}catch(e){r=t,c=1,i=e}finally{u=1}}return{value:e,done:l}}}(a,n,r),!0),d}var s={};function u(){}function d(){}function l(){}e=Object.getPrototypeOf;var f=[][o]?e(e([][o]())):(i(e={},o,(function(){return this})),e),p=l.prototype=u.prototype=Object.create(f);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,i(t,n,"GeneratorFunction")),t.prototype=Object.create(p),t}return d.prototype=l,i(p,"constructor",l),i(l,"constructor",d),d.displayName="GeneratorFunction",i(l,n,"GeneratorFunction"),i(p),i(p,n,"Generator"),i(p,o,(function(){return this})),i(p,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:r,m:m}})()}function i(t,e,a,o){var n=Object.defineProperty;try{n({},"",{})}catch(t){n=0}(i=function(t,e,a,o){function r(e,a){i(t,e,(function(t){return this._invoke(e,a,t)}))}e?n?n(t,e,{value:a,enumerable:!o,configurable:!o,writable:!o}):t[e]=a:(r("next",0),r("throw",1),r("return",2))})(t,e,a,o)}function u(t,e,a,o,n,r,s){try{var c=t[r](s),i=c.value}catch(t){return void a(t)}c.done?e(i):Promise.resolve(i).then(o,n)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(o,n){var r=t.apply(e,a);function s(t){u(r,o,n,s,c,"next",t)}function c(t){u(r,o,n,s,c,"throw",t)}s(void 0)}))}}var l={middleware:["auth","check-permissions","check-woocommerce-addon"],metaInfo:function(){return{title:this.$t("Woocommerce")}},data:function(){return{breadcrumbsCurrent:"Woocommerce",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Woocommerce",url:""}],allVatRates:[],allWoocommerceVatRates:[],selectedVatRates:{},form:new o.a({account:null}),loading:!1,productLoading:!1,orderLoading:!1,resetLoading:!1,taxMapLoading:!1,resetCategoryLoading:!1,isDemoMode:window.config.isDemoMode,accounts:""}},computed:Object(n.b)({appInfo:"operations/appInfo",items:"operations/items"}),created:function(){this.getVatRates(),this.getSelectedWoocommerceAccount(),this.getAccounts(),this.fetchWoocommerceVatRates()},methods:{getSelectedWoocommerceAccount:function(){var t=this;return d(c().m((function e(){var a,o;return c().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,s.a.get(window.location.origin+"/api/woocommerce-order-setting-account");case 1:a=e.v,o=a.data,t.form.account=o.data;case 2:return e.a(2)}}),e)})))()},getAccounts:function(){var t=this;return d(c().m((function e(){var a,o;return c().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,s.a.get(window.location.origin+"/api/all-accounts");case 1:a=e.v,o=a.data,t.accounts=o.data;case 2:return e.a(2)}}),e)})))()},updateWoocommerceOrderSettings:function(){var t=this;return d(c().m((function e(){return c().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,t.form.post(window.location.origin+"/api/update/woocommerce-order-settings").then((function(){toast.fire({type:"success",title:t.$t("Settings updated successfully")})})).catch((function(){toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}));case 1:return e.a(2)}}),e)})))()},syncProduct:function(){var t=this;this.productLoading=!0,s.a.get("api/sync-woocommerce-products").then((function(e){t.productLoading=!1,toast.fire({type:"success",title:t.$t("Products synced Successfully")})})).catch((function(){t.productLoading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))},resetSyncedProducts:function(){var t=this;this.resetLoading=!0,s.a.post("api/reset-sync-woocommerce-products").then((function(e){t.resetLoading=!1,toast.fire({type:"success",title:t.$t("Products reset Successfully")})})).catch((function(){t.resetLoading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))},syncOrder:function(){var t=this;this.orderLoading=!0,s.a.get("api/sync-woocommerce-orders").then((function(e){t.orderLoading=!1,toast.fire({type:"success",title:t.$t("Order synced Successfully")})})).catch((function(){t.orderLoading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))},syncProductCategories:function(){var t=this;this.loading=!0,s.a.get("api/sync-woocommerce-product-categories").then((function(e){t.loading=!1,toast.fire({type:"success",title:t.$t("Categories synced Successfully")})})).catch((function(){t.loading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))},resetSyncProductCategories:function(){var t=this;this.resetCategoryLoading=!0,s.a.post("api/reset-woocommerce-product-categories").then((function(e){t.resetCategoryLoading=!1,toast.fire({type:"success",title:t.$t("Categories reset Successfully")})})).catch((function(){t.resetCategoryLoading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))},getVatRates:function(){var t=this;s.a.get("/api/all-vat-rates").then((function(e){t.allVatRates=e.data.data}))},fetchWoocommerceVatRates:function(){var t=this;return d(c().m((function e(){var a,o,n;return c().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,s.a.get("api/woocommerce-all-vat-rates");case 1:a=e.v,o=a.data,t.allWoocommerceVatRates=o,e.n=3;break;case 2:e.p=2,n=e.v,console.error("Error fetching WooCommerce VAT rates:",n);case 3:return e.a(2)}}),e,null,[[0,2]])})))()},submitMapping:function(){var t=this;this.taxMapLoading=!0,s.a.post("api/woocommerce-map-vat-rates",this.selectedVatRates).then((function(e){t.taxMapLoading=!1,toast.fire({type:"success",title:t.$t("Tax mapped Successfully")})})).catch((function(e){t.taxMapLoading=!1,console.error(e)}))}}},f=a(1),p=Object(f.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("breadcrumbs",{attrs:{items:t.breadcrumbs,current:t.breadcrumbsCurrent}}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",[t._v(t._s(t.$t("Account for transections")))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),t.updateWoocommerceOrderSettings.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table"},[e("tbody",[e("tr",[e("td",[t._v("\n                                                "+t._s(t.$t("Account"))+"\n                                            ")]),t._v(" "),e("td",[t.accounts?e("div",[e("v-select",{class:{"is-invalid":t.form.errors.has("account")},attrs:{options:t.accounts,label:"label",name:"account",placeholder:t.$t("Select an account")},scopedSlots:t._u([{key:"option",fn:function(a){return[e("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:a.image}}),t._v("\n                                                            "+t._s(a.label)+"\n                                                        ")]}}],null,!1,638730923),model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"account"}})],1):t._e()])])])])])]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Update")))])])])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h3",[t._v(t._s(t.$t("Tax Rates Mapping")))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("form",{attrs:{id:"mapping-tax"},on:{submit:function(e){return e.preventDefault(),t.submitMapping.apply(null,arguments)}}},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("POS Tax Rate")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Equivalent WooCommerce Tax Rate")))])])]),t._v(" "),e("tbody",t._l(t.allVatRates,(function(a,o){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.code))]),t._v(" "),e("td",[e("v-select",{attrs:{options:t.allWoocommerceVatRates,label:"name",name:"vatRate",placeholder:t.$t("Select a Tax Rate")},model:{value:t.selectedVatRates[a.id],callback:function(e){t.$set(t.selectedVatRates,a.id,e)},expression:"selectedVatRates[vatRate.id]"}})],1)])})),0)]),t._v(" "),e("button",{staticClass:"btn btn-primary form-control",class:{"btn-loading":t.taxMapLoading},attrs:{type:"submit"}},[t._v(t._s(t.$t("Submit")))])])])])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h4",[t._v(" "+t._s(t.$t("Sync Product Categories")))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-primary w-100",class:{"btn-loading":t.loading},attrs:{id:"sync-categories",type:"button"},on:{click:t.syncProductCategories}},[e("i",{staticClass:"fa fa-handshake-o"}),t._v(t._s(t.$t("Sync Categories")))])]),t._v(" "),e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-warning w-100",class:{"btn-loading":t.resetCategoryLoading},attrs:{id:"reset-categories",type:"button"},on:{click:t.resetSyncProductCategories}},[e("i",{staticClass:"fa fa-undo"}),t._v(" "+t._s(t.$t("Reset Synced Category")))])])])])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h4",[t._v(t._s(t.$t("Sync Products")))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-primary w-100",class:{"btn-loading":t.productLoading},attrs:{id:"sync-products",type:"button"},on:{click:t.syncProduct}},[e("i",{staticClass:"fa fa-handshake-o"}),t._v("\n                                "+t._s(t.$t("Sync Products")))])]),t._v(" "),e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-warning w-100",class:{"btn-loading":t.resetLoading},attrs:{id:"reset-products",type:"button"},on:{click:t.resetSyncedProducts}},[e("i",{staticClass:"fa fa-undo"}),t._v(" "+t._s(t.$t("Reset Synced Product")))])])])])]),t._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("h4",[t._v(t._s(t.$t("Sync Orders")))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-12"},[e("button",{staticClass:"btn btn-primary w-100",class:{"btn-loading":t.orderLoading},attrs:{id:"sync-orders",type:"button"},on:{click:t.syncOrder}},[e("i",{staticClass:"fa fa-handshake-o"}),t._v(" "+t._s(t.$t("Sync")))])])])])])])])],1)}),[],!1,null,null,null);e.default=p.exports}}]);