/*! For license information please see 175.62a045.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{560:function(t,o,i){"use strict";i.r(o);var r=i(5),e=i(3),n=i.n(e);function s(){var t,o,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",e=i.toStringTag||"@@toStringTag";function n(i,r,e,n){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return a(u,"_invoke",function(i,r,e){var n,s,a,l=0,u=e||[],f=!1,d={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(o,i){return n=o,s=0,a=t,d.n=i,c}};function _(i,r){for(s=i,a=r,o=0;!f&&l&&!e&&o<u.length;o++){var e,n=u[o],_=d.p,m=n[2];i>3?(e=m===r)&&(a=n[(s=n[4])?5:(s=3,3)],n[4]=n[5]=t):n[0]<=_&&((e=i<2&&_<n[1])?(s=0,d.v=r,d.n=n[1]):_<m&&(e=i<3||n[0]>r||r>m)&&(n[4]=i,n[5]=r,d.n=m,s=0))}if(e||i>1)return c;throw f=!0,r}return function(e,u,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&_(u,m),s=u,a=m;(o=s<2?t:a)||!f;){n||(s?s<3?(s>1&&(d.n=-1),_(s,a)):d.n=a:d.v=a);try{if(l=2,n){if(s||(e="next"),o=n[e]){if(!(o=o.call(n,a)))throw TypeError("iterator result is not an object");if(!o.done)return o;a=o.value,s<2&&(s=0)}else 1===s&&(o=n.return)&&o.call(n),s<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),s=1);n=t}else if((o=(f=d.n<0)?a:i.call(r,d))!==c)break}catch(o){n=t,s=1,a=o}finally{l=1}}return{value:o,done:f}}}(i,e,n),!0),u}var c={};function l(){}function u(){}function f(){}o=Object.getPrototypeOf;var d=[][r]?o(o([][r]())):(a(o={},r,(function(){return this})),o),_=f.prototype=l.prototype=Object.create(d);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,e,"GeneratorFunction")),t.prototype=Object.create(_),t}return u.prototype=f,a(_,"constructor",f),a(f,"constructor",u),u.displayName="GeneratorFunction",a(f,e,"GeneratorFunction"),a(_),a(_,e,"Generator"),a(_,r,(function(){return this})),a(_,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:n,m:m}})()}function a(t,o,i,r){var e=Object.defineProperty;try{e({},"",{})}catch(t){e=0}(a=function(t,o,i,r){function n(o,i){a(t,o,(function(t){return this._invoke(o,i,t)}))}o?e?e(t,o,{value:i,enumerable:!r,configurable:!r,writable:!r}):t[o]=i:(n("next",0),n("throw",1),n("return",2))})(t,o,i,r)}function c(t,o,i,r,e,n,s){try{var a=t[n](s),c=a.value}catch(t){return void i(t)}a.done?o(c):Promise.resolve(c).then(r,e)}function l(t){return function(){var o=this,i=arguments;return new Promise((function(r,e){var n=t.apply(o,i);function s(t){c(n,r,e,s,a,"next",t)}function a(t){c(n,r,e,s,a,"throw",t)}s(void 0)}))}}var u={middleware:["auth","check-permissions"],metaInfo:function(){return{title:this.$t("SMS Configuration")}},data:function(){return{breadcrumbsCurrent:"Mail Configuration",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Setup",url:"setup.index"},{name:"SMS Configuration",url:""}],form:new r.a({twilio_account_sid:"",twilio_auth_token:"",twilio_from:"",twilio_sms_service_sid:""}),isDemoMode:window.config.isDemoMode,loading:!1}},created:function(){this.getSMSServerValues()},methods:{getSMSServerValues:function(){var t=this;return l(s().m((function o(){var i,r;return s().w((function(o){for(;;)switch(o.n){case 0:return o.n=1,n.a.get(window.location.origin+"/api/sms-configuration/");case 1:i=o.v,r=i.data,t.form.twilio_account_sid=r.twilio_account_sid.value,t.form.twilio_auth_token=r.twilio_auth_token.value,t.form.twilio_from=r.twilio_from.value,t.form.twilio_sms_service_sid=r.twilio_sms_service_sid.value;case 2:return o.a(2)}}),o)})))()},updateSettings:function(){var t=this;return l(s().m((function o(){return s().w((function(o){for(;;)switch(o.n){case 0:if(t.isDemoMode){o.n=2;break}return o.n=1,t.form.post(window.location.origin+"/api/update-sms-configuration").then((function(){toast.fire({type:"success",title:t.$t("Settings updated successfully")})})).catch((function(){toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}));case 1:o.n=3;break;case 2:toast.fire({type:"warning",title:t.$t("You are not allowed to do this in demo version.")});case 3:return o.a(2)}}),o)})))()},testConnection:function(){var t=this;this.loading=!0,n.a.get("/api/send-test-connection-sms").then((function(){t.loading=!1,toast.fire({type:"success",title:t.$t("SMS sent. Your connection is secure")})})).catch((function(){t.loading=!1,toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}))}}},f=i(1),d=Object(f.a)(u,(function(){var t=this,o=t._self._c;return o("div",[o("breadcrumbs",{attrs:{items:t.breadcrumbs,current:t.breadcrumbsCurrent}}),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-xl-3"},[o("SettingsSidebar")],1),t._v(" "),o("div",{staticClass:"col-12 col-xl-9"},[o("form",{attrs:{role:"form"},on:{submit:function(o){return o.preventDefault(),t.updateSettings.apply(null,arguments)},keydown:function(o){return t.form.onKeydown(o)}}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-header setings-header"},[o("h3",{staticClass:"card-title"},[t._v("\n              "+t._s(t.$t("SMS Configuration"))+"\n            ")])]),t._v(" "),o("div",{staticClass:"card-body"},[o("div",{staticClass:"row"},[o("div",{staticClass:"form-group col-md-12"},[o("label",{attrs:{for:"twilio_account_sid"}},[t._v(t._s(t.$t("TWILIO ACCOUNT SID"))+"\n                  "),o("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.twilio_account_sid,expression:"form.twilio_account_sid"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("twilio_account_sid")},attrs:{id:"twilio_account_sid",type:"text",name:"twilio_account_sid",placeholder:t.$t("TWILIO ACCOUNT SID"),required:""},domProps:{value:t.form.twilio_account_sid},on:{input:function(o){o.target.composing||t.$set(t.form,"twilio_account_sid",o.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"twilio_account_sid"}})],1),t._v(" "),o("div",{staticClass:"form-group col-md-12"},[o("label",{attrs:{for:"twilio_auth_token"}},[t._v(t._s(t.$t("TWILIO AUTH TOKEN"))+"\n                  "),o("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.twilio_auth_token,expression:"form.twilio_auth_token"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("twilio_auth_token")},attrs:{id:"twilio_auth_token",type:"text",name:"twilio_auth_token",placeholder:t.$t("TWILIO AUTH TOKEN"),required:""},domProps:{value:t.form.twilio_auth_token},on:{input:function(o){o.target.composing||t.$set(t.form,"twilio_auth_token",o.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"twilio_auth_token"}})],1),t._v(" "),o("div",{staticClass:"form-group col-md-12"},[o("label",{attrs:{for:"twilio_from"}},[t._v(t._s(t.$t("TWILIO FROM NUMBER"))+"\n                  "),o("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.twilio_from,expression:"form.twilio_from"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("twilio_from")},attrs:{id:"twilio_from",type:"text",name:"twilio_from",placeholder:t.$t("TWILIO FROM NUMBER"),required:""},domProps:{value:t.form.twilio_from},on:{input:function(o){o.target.composing||t.$set(t.form,"twilio_from",o.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"twilio_from"}})],1),t._v(" "),o("div",{staticClass:"form-group col-md-12"},[o("label",{attrs:{for:"twilio_sms_service_sid"}},[t._v(t._s(t.$t("TWILIO SMS SERVICE SID"))+"\n                  "),o("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.twilio_sms_service_sid,expression:"form.twilio_sms_service_sid"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("twilio_sms_service_sid")},attrs:{id:"twilio_sms_service_sid",type:"text",name:"twilio_sms_service_sid",placeholder:t.$t("TWILIO SMS SERVICE SID"),required:""},domProps:{value:t.form.twilio_sms_service_sid},on:{input:function(o){o.target.composing||t.$set(t.form,"twilio_sms_service_sid",o.target.value)}}}),t._v(" "),o("has-error",{attrs:{form:t.form,field:"twilio_sms_service_sid"}})],1)])]),t._v(" "),o("div",{staticClass:"card-footer"},[o("v-button",{staticClass:"btn btn-primary",attrs:{loading:t.form.busy}},[o("i",{staticClass:"fas fa-edit"}),t._v(" "+t._s(t.$t("Save changes"))+"\n            ")]),t._v(" "),o("button",{staticClass:"btn btn-secondary float-right",class:{"btn-loading":t.loading},attrs:{type:"button"},on:{click:function(o){return t.testConnection()}}},[o("i",{staticClass:"fas fa-wifi"}),t._v(" "+t._s(t.$t("Test Connection"))+"\n            ")])],1)])])])])],1)}),[],!1,null,null,null);o.default=d.exports}}]);