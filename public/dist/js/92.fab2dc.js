/*! For license information please see 92.fab2dc.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{443:function(e,t,r){"use strict";r.r(t);var a=r(4),s=r(5),o=r(3),n=r.n(o);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,a,s,o){var l=a&&a.prototype instanceof i?a:i,u=Object.create(l.prototype);return c(u,"_invoke",function(r,a,s){var o,i,l,c=0,u=s||[],f=!1,m={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,l=e,m.n=r,n}};function p(r,a){for(i=r,l=a,t=0;!f&&c&&!s&&t<u.length;t++){var s,o=u[t],p=m.p,d=o[2];r>3?(s=d===a)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((s=r<2&&p<o[1])?(i=0,m.v=a,m.n=o[1]):p<d&&(s=r<3||o[0]>a||a>d)&&(o[4]=r,o[5]=a,m.n=d,i=0))}if(s||r>1)return n;throw f=!0,a}return function(s,u,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,d),i=u,l=d;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(m.n=-1),p(i,l)):m.n=l:m.v=l);try{if(c=2,o){if(i||(s="next"),t=o[s]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+s+"' method"),i=1);o=e}else if((t=(f=m.n<0)?l:r.call(a,m))!==n)break}catch(t){o=e,i=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,s,o),!0),u}var n={};function i(){}function u(){}function f(){}t=Object.getPrototypeOf;var m=[][a]?t(t([][a]())):(c(t={},a,(function(){return this})),t),p=f.prototype=i.prototype=Object.create(m);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=f,c(p,"constructor",f),c(f,"constructor",u),u.displayName="GeneratorFunction",c(f,s,"GeneratorFunction"),c(p),c(p,s,"Generator"),c(p,a,(function(){return this})),c(p,"toString",(function(){return"[object Generator]"})),(l=function(){return{w:o,m:d}})()}function c(e,t,r,a){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}(c=function(e,t,r,a){function o(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))}t?s?s(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(o("next",0),o("throw",1),o("return",2))})(e,t,r,a)}function u(e,t,r,a,s,o,n){try{var i=e[o](n),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(a,s)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(a,s){var o=e.apply(t,r);function n(e){u(o,a,s,n,i,"next",e)}function i(e){u(o,a,s,n,i,"throw",e)}n(void 0)}))}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={middleware:["auth","check-permissions"],metaInfo:function(){return{title:this.$t("Edit Asset")}},data:function(){return{breadcrumbsCurrent:"Edit Asset",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Assets",url:"assets.index"},{name:"Edit",url:""}],form:new s.a({name:"",assetCost:"",assetType:null,depreciation:0,salvageValue:0,usefulLife:0,depreciationExpense:"",depreciationType:"Year",image:"",date:(new Date).toISOString().slice(0,10),note:"",status:1}),loading:!0,url:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.b)("operations",["items"])),created:function(){this.getAsset(),this.getTypes()},methods:{getTypes:function(){var e=this;return f(l().m((function t(){return l().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,e.$store.dispatch("operations/allData",{path:"/api/all-asset-types"});case 1:return t.a(2)}}),t)})))()},getAsset:function(){var e=this;return f(l().m((function t(){var r,a;return l().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,n.a.get(window.location.origin+"/api/assets/"+e.$route.params.slug);case 1:r=t.v,a=r.data,e.form.name=a.data.name,e.form.assetCost=a.data.amount,e.form.note=a.data.note,e.form.status=a.data.status,e.form.assetType=a.data.type,e.form.date=a.data.date,e.form.depreciation=a.data.depreciation,e.form.salvageValue=a.data.salvageValue>0?a.data.salvageValue:0,e.form.usefulLife=a.data.usefulLife,e.form.depreciationType=1==a.data.depreciationType?"Year":"Month",e.form.depreciationExpense=a.data.depreciationExpenseTxt,e.url=a.data.image;case 2:return t.a(2)}}),t)})))()},calculateDepreciationExpense:function(){if(1==this.form.depreciation&&this.form.assetCost&&this.form.usefulLife){var e=(this.form.assetCost-this.form.salvageValue)/this.form.usefulLife;return this.form.depreciationExpense=e+" Per "+this.form.depreciationType}},onFileChange:function(e){var t=this,r=e.target.files[0],a=new FileReader;r.size<2111775&&("image/jpeg"===r.type||"image/png"===r.type||"image/gif"===r.type)?(a.onloadend=function(e){t.form.image=a.result},a.readAsDataURL(r),this.url=URL.createObjectURL(r)):Swal.fire(this.$t("Error!"),this.$t("Please select a valid thumbnail with size less than 2 MB"),"error")},updateAsset:function(){var e=this;return f(l().m((function t(){return l().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,e.form.patch(window.location.origin+"/api/assets/"+e.$route.params.slug).then((function(t){toast.fire({type:"success",title:e.$t("Asset updated successfully")}),e.$router.push({name:"assets.index"})})).catch((function(){toast.fire({type:"error",title:e.$t("Opps...something went wrong")})}));case 1:return t.a(2)}}),t)})))()}}},v=r(1),g=Object(v.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("breadcrumbs",{attrs:{items:e.breadcrumbs,current:e.breadcrumbsCurrent}}),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("h3",{staticClass:"card-title"},[e._v(e._s(e.$t("Edit asset")))]),e._v(" "),t("router-link",{staticClass:"btn btn-dark float-right",attrs:{to:{name:"assets.index"}}},[t("i",{staticClass:"fas fa-long-arrow-alt-left"}),e._v(" "+e._s(e.$t("Back"))+"\n          ")])],1),e._v(" "),t("form",{attrs:{role:"form",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.updateAsset.apply(null,arguments)},keydown:function(t){return e.form.onKeydown(t)}}},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("Asset Name"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("name")},attrs:{id:"name",type:"text",name:"name",placeholder:e.$t("Enter asset name")},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"name"}})],1),e._v(" "),e.items?t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"assetType"}},[e._v(e._s(e.$t("Asset Type"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("v-select",{class:{"is-invalid":e.form.errors.has("assetType")},attrs:{options:e.items,label:"name",name:"assetType",placeholder:e.$t("Select an asset type")},model:{value:e.form.assetType,callback:function(t){e.$set(e.form,"assetType",t)},expression:"form.assetType"}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"assetType"}})],1):e._e()]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"assetCost"}},[e._v(e._s(e.$t("Asset Cost"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.assetCost,expression:"form.assetCost"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("assetCost")},attrs:{id:"assetCost",type:"number",name:"assetCost",placeholder:e.$t("Enter asset cost")},domProps:{value:e.form.assetCost},on:{change:e.calculateDepreciationExpense,keyup:e.calculateDepreciationExpense,input:function(t){t.target.composing||e.$set(e.form,"assetCost",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"assetCost"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"depreciation"}},[e._v(e._s(e.$t("Depreciation"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.depreciation,expression:"form.depreciation"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("depreciation")},attrs:{id:"depreciation"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"depreciation",t.target.multiple?r:r[0])}}},[t("option",{attrs:{value:"1"}},[e._v(e._s(e.$t("Yes")))]),e._v(" "),t("option",{attrs:{value:"0"}},[e._v(e._s(e.$t("No")))])]),e._v(" "),t("has-error",{attrs:{form:e.form,field:"depreciation"}})],1)]),e._v(" "),1==e.form.depreciation?t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"depreciationType"}},[e._v(e._s(e.$t("Depreciation Type")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.depreciationType,expression:"form.depreciationType"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("depreciationType")},attrs:{id:"depreciationType"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"depreciationType",t.target.multiple?r:r[0])},e.calculateDepreciationExpense]}},[t("option",{attrs:{value:"Month"}},[e._v(e._s(e.$t("Monthly")))]),e._v(" "),t("option",{attrs:{value:"Year"}},[e._v(e._s(e.$t("Yearly")))])]),e._v(" "),t("has-error",{attrs:{form:e.form,field:"depreciationType"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"salvageValue"}},[e._v(e._s(e.$t("Salvage Value")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.salvageValue,expression:"form.salvageValue"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("salvageValue")},attrs:{id:"salvageValue",type:"number",name:"salvageValue",placeholder:e.$t("Salvage Value")},domProps:{value:e.form.salvageValue},on:{change:e.calculateDepreciationExpense,keyup:e.calculateDepreciationExpense,input:function(t){t.target.composing||e.$set(e.form,"salvageValue",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"salvageValue"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"usefulLife"}},[e._v(e._s(e.$t("Useful Life"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.usefulLife,expression:"form.usefulLife"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("usefulLife")},attrs:{id:"usefulLife",type:"number",name:"usefulLife",placeholder:e.$t("Enter useful life")},domProps:{value:e.form.usefulLife},on:{change:e.calculateDepreciationExpense,keyup:e.calculateDepreciationExpense,input:function(t){t.target.composing||e.$set(e.form,"usefulLife",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"usefulLife"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"depreciationExpense"}},[e._v(e._s(e.$t("Depreciation")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.depreciationExpense,expression:"form.depreciationExpense"}],staticClass:"form-control",attrs:{id:"depreciationExpense",type:"text",name:"depreciationExpense",readonly:""},domProps:{value:e.form.depreciationExpense},on:{input:function(t){t.target.composing||e.$set(e.form,"depreciationExpense",t.target.value)}}})])]):e._e(),e._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"note"}},[e._v(e._s(e.$t("Note")))]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.note,expression:"form.note"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("note")},attrs:{id:"note",placeholder:e.$t("Write your note here!")},domProps:{value:e.form.note},on:{input:function(t){t.target.composing||e.$set(e.form,"note",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"note"}})],1),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"date"}},[e._v(e._s(e.$t("Date"))+"\n                  "),t("span",{staticClass:"required"},[e._v("*")])]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.date,expression:"form.date"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("date")},attrs:{id:"date",type:"date",name:"date"},domProps:{value:e.form.date},on:{input:function(t){t.target.composing||e.$set(e.form,"date",t.target.value)}}}),e._v(" "),t("has-error",{attrs:{form:e.form,field:"date"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-3"},[t("label",{attrs:{for:"status"}},[e._v(e._s(e.$t("Status")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.status,expression:"form.status"}],staticClass:"form-control",class:{"is-invalid":e.form.errors.has("status")},attrs:{id:"status"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.form,"status",t.target.multiple?r:r[0])}}},[t("option",{attrs:{value:"1"}},[e._v(e._s(e.$t("Active")))]),e._v(" "),t("option",{attrs:{value:"0"}},[e._v(e._s(e.$t("Inactive")))])]),e._v(" "),t("has-error",{attrs:{form:e.form,field:"status"}})],1),e._v(" "),t("div",{staticClass:"form-group col-md-6"},[t("label",{attrs:{for:"image"}},[e._v(e._s(e.$t("Image")))]),e._v(" "),t("div",{staticClass:"custom-file"},[t("input",{staticClass:"custom-file-input",class:{"is-invalid":e.form.errors.has("image")},attrs:{id:"image",type:"file",name:"image"},on:{change:e.onFileChange}}),e._v(" "),t("label",{staticClass:"custom-file-label",attrs:{for:"image"}},[e._v(e._s(e.$t("Choose file")))])]),e._v(" "),t("has-error",{attrs:{form:e.form,field:"image"}}),e._v(" "),t("div",{staticClass:"bg-light mt-4 w-25"},[e.url?t("img",{staticClass:"img-fluid",attrs:{src:e.url,alt:e.$t("Attached Image")}}):e._e()])],1)])]),e._v(" "),t("div",{staticClass:"card-footer"},[t("v-button",{staticClass:"btn btn-primary",attrs:{loading:e.form.busy}},[t("i",{staticClass:"fas fa-edit"}),e._v(" "+e._s(e.$t("Save changes"))+"\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"reset"},on:{click:function(t){return e.form.reset()}}},[t("i",{staticClass:"fas fa-power-off"}),e._v(" "+e._s(e.$t("Reset"))+"\n            ")])],1)])])])])],1)}),[],!1,null,"39084fa6",null);t.default=g.exports}}]);