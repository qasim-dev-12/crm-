/*! For license information please see 173.82de93.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{558:function(t,e,r){"use strict";r.r(e);var n=r(4),s=r(5);function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function a(r,n,s,i){var a=n&&n.prototype instanceof l?n:l,u=Object.create(a.prototype);return o(u,"_invoke",function(r,n,s){var i,o,a,l=0,u=s||[],f=!1,m={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,r){return i=e,o=0,a=t,m.n=r,c}};function d(r,n){for(o=r,a=n,e=0;!f&&l&&!s&&e<u.length;e++){var s,i=u[e],d=m.p,p=i[2];r>3?(s=p===n)&&(a=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=d&&((s=r<2&&d<i[1])?(o=0,m.v=n,m.n=i[1]):d<p&&(s=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,m.n=p,o=0))}if(s||r>1)return c;throw f=!0,n}return function(s,u,p){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&d(u,p),o=u,a=p;(e=o<2?t:a)||!f;){i||(o?o<3?(o>1&&(m.n=-1),d(o,a)):m.n=a:m.v=a);try{if(l=2,i){if(o||(s="next"),e=i[s]){if(!(e=e.call(i,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,o<2&&(o=0)}else 1===o&&(e=i.return)&&e.call(i),o<2&&(a=TypeError("The iterator does not provide a '"+s+"' method"),o=1);i=t}else if((e=(f=m.n<0)?a:r.call(n,m))!==c)break}catch(e){i=t,o=1,a=e}finally{l=1}}return{value:e,done:f}}}(r,s,i),!0),u}var c={};function l(){}function u(){}function f(){}e=Object.getPrototypeOf;var m=[][n]?e(e([][n]())):(o(e={},n,(function(){return this})),e),d=f.prototype=l.prototype=Object.create(m);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,s,"GeneratorFunction")),t.prototype=Object.create(d),t}return u.prototype=f,o(d,"constructor",f),o(f,"constructor",u),u.displayName="GeneratorFunction",o(f,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,n,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:a,m:p}})()}function o(t,e,r,n){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}(o=function(t,e,r,n){function i(e,r){o(t,e,(function(t){return this._invoke(e,r,t)}))}e?s?s(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(i("next",0),i("throw",1),i("return",2))})(t,e,r,n)}function a(t,e,r,n,s,i,o){try{var a=t[i](o),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,s)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var i=t.apply(e,r);function o(t){a(i,n,s,o,c,"next",t)}function c(t){a(i,n,s,o,c,"throw",t)}o(void 0)}))}}var l={middleware:["auth","check-permissions"],metaInfo:function(){return{title:this.$t("Create Role")}},data:function(){return{breadcrumbsCurrent:"Create Role",breadcrumbs:[{name:"Dashboard",url:"home"},{name:"Setup",url:"setup.index"},{name:"Roles & Permissions",url:"roles.index"},{name:"Create",url:""}],form:new s.a({name:"",permission:[]}),loading:!0,isDemoMode:window.config.isDemoMode}},computed:Object(n.b)({items:"operations/items"}),created:function(){this.getData()},methods:{saveRole:function(){var t=this;return c(i().m((function e(){return i().w((function(e){for(;;)switch(e.n){case 0:if(t.isDemoMode){e.n=2;break}return e.n=1,t.form.post(window.location.origin+"/api/roles").then((function(){toast.fire({type:"success",title:t.$t("Role added successfully")}),t.$router.push({name:"roles.index"})})).catch((function(){toast.fire({type:"error",title:t.$t("Opps...something went wrong")})}));case 1:e.n=3;break;case 2:toast.fire({type:"warning",title:t.$t("You are not allowed to do this in demo version.")});case 3:return e.a(2)}}),e)})))()},getData:function(){var t=this;return c(i().m((function e(){return i().w((function(e){for(;;)switch(e.n){case 0:return t.loading=!0,e.n=1,t.$store.dispatch("operations/allData",{path:"/api/all-permissions"});case 1:t.setPermission(t.items),t.loading=!1;case 2:return e.a(2)}}),e)})))()},setPermission:function(t){var e=this;return c(i().m((function r(){var n,s;return i().w((function(r){for(;;)switch(r.n){case 0:for(n in t)for(s in t[n])e.form.permission.push(t[n][s].slug);case 1:return r.a(2)}}),r)})))()},onChangeEventHandler:function(t,e){if(e.includes("view")||e.includes("edit")||e.includes("delete")){var r=e.includes("delete")?e.substring(0,e.length-6):e.substring(0,e.length-4);this.form.permission.includes(e)&&!this.form.permission.includes(r+"list")&&this.form.permission.push(r+"list")}if(e.includes("list")&&!this.form.permission.includes(e)){var n=e.substring(0,e.length-4);this.form.permission=this.form.permission.filter((function(t){return n+"edit"!==t})),this.form.permission=this.form.permission.filter((function(t){return n+"delete"!==t})),this.form.permission=this.form.permission.filter((function(t){return n+"view"!==t}))}}}},u=r(1),f=Object(u.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("breadcrumbs",{attrs:{items:t.breadcrumbs,current:t.breadcrumbsCurrent}}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-xl-3"},[e("SettingsSidebar")],1),t._v(" "),e("div",{staticClass:"col-12 col-xl-9"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.saveRole.apply(null,arguments)},keydown:function(e){return t.form.onKeydown(e)}}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header setings-header"},[e("div",{staticClass:"col-xl-4 col-4"},[e("h3",{staticClass:"card-title"},[t._v("\n                "+t._s(t.$t("Create role"))+"\n              ")])]),t._v(" "),e("div",{staticClass:"col-xl-8 col-8 float-right text-right"},[e("router-link",{staticClass:"btn btn-dark float-right",attrs:{to:{name:"roles.index"}}},[e("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v("\n                "+t._s(t.$t("Back"))+"\n              ")])],1)]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"form-group mb-4"},[e("label",{attrs:{for:"name"}},[t._v(t._s(t.$t("Name"))+"\n                "),e("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",class:{"is-invalid":t.form.errors.has("name")},attrs:{placeholder:t.$t("Enter a name")},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.form,field:"name"}})],1),t._v(" "),e("h5",{staticClass:"mb-3 mt-4"},[t._v("\n              "+t._s(t.$t("Select Permissions:"))+"\n            ")]),t._v(" "),e("masonry",{attrs:{cols:{default:2,1e3:2,700:1,400:1},gutter:{default:"30px",700:"15px"}}},t._l(t.items,(function(r,n){return e("div",{key:n,class:{"is-invalid":t.form.errors.has("permission")}},[e("has-error",{staticClass:"permission",attrs:{form:t.form,field:"permission"}}),t._v(" "),e("div",{staticClass:"card permission-card"},[e("div",{staticClass:"card-header"},[r[0]?e("h3",{staticClass:"card-title text-bold text-capitalize"},[t._v("\n                      "+t._s(r[0].guard_name)+"\n                    ")]):t._e(),t._v(" "),e("div",{staticClass:"card-tools"},[e("button",{staticClass:"btn btn-tool",attrs:{type:"button",loading:t.form.busy,"data-card-widget":"collapse"}},[e("i",{staticClass:"fas fa-minus"})])])]),t._v(" "),e("div",{staticClass:"card-body permisson-card"},[e("ul",t._l(r,(function(r,n){return e("li",{key:n},[e("label",{staticClass:"text-capitalize",attrs:{for:r.slug}},[t._v(t._s(r.name))]),t._v(" "),e("div",{staticClass:"custom-control custom-checkbox mb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.permission,expression:"form.permission"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:r.slug,name:"permission"},domProps:{value:r.slug,checked:Array.isArray(t.form.permission)?t._i(t.form.permission,r.slug)>-1:t.form.permission},on:{change:[function(e){var n=t.form.permission,s=e.target,i=!!s.checked;if(Array.isArray(n)){var o=r.slug,a=t._i(n,o);s.checked?a<0&&t.$set(t.form,"permission",n.concat([o])):a>-1&&t.$set(t.form,"permission",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.form,"permission",i)},function(e){return t.onChangeEventHandler(e,r.slug)}]}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:r.slug}})])])})),0)])])],1)})),0)],1),t._v(" "),e("div",{staticClass:"card-footer"},[e("v-button",{staticClass:"btn btn-primary",attrs:{loading:t.form.busy}},[e("i",{staticClass:"fas fa-save"}),t._v(" "+t._s(t.$t("Save"))+"\n            ")]),t._v(" "),e("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"reset"},on:{click:function(e){return t.form.reset()}}},[e("i",{staticClass:"fas fa-power-off"}),t._v(" "+t._s(t.$t("Reset"))+"\n            ")])],1)])])])])],1)}),[],!1,null,null,null);e.default=f.exports}}]);